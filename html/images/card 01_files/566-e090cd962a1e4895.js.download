try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="74c911bf-004c-46ab-b47a-6d1f9d8f3cae",e._sentryDebugIdIdentifier="sentry-dbid-74c911bf-004c-46ab-b47a-6d1f9d8f3cae")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{10566:function(e,a,t){t.d(a,{default:function(){return _}});var n=t(57437),s=t(74291),l=t(40279),i=t(92380),r=t(16593),o=t(73247),c=t(2265),d={src:"/_next/static/media/globalMap.9d38ea54.svg",height:29,width:28,blurWidth:0,blurHeight:0},u=t(19327),m=t(39233);function h(e){let{country:a,region:t,searchQuery:n,isGlobal:s}=e;return a?!!(s&&["global","international"].some(e=>(0,m.E)(e).includes(n)))||(0,m.E)(a.name).includes(n)||(0,m.E)(a.code).includes(n)||(0,m.E)(a.local_state_code?a.local_state_code:"").includes(n)||(0,m.E)(a.code_alpha3).includes(n):!!t&&(!!["region","regional"].some(e=>(0,m.E)(e).includes((0,m.E)(n)))||(0,m.E)(t.name).includes(n)||t.countries.some(e=>h({country:e,searchQuery:n})))}var f=t(68718),g=t(93448),x=t(99376),p=t(10407),y=t(33145),j=t(27648),b=function(e){let{countryName:a,href:t,image_url:s}=e;return(0,n.jsx)("div",{onClick:()=>(0,f.b)({event:"search",search_term:a}),children:(0,n.jsxs)(j.default,{className:"flex justify-between rounded-full p-2 transition hover:bg-secondary",href:t,children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"relative h-[20px] w-[30px]",children:(0,n.jsx)(y.default,{src:s,alt:"".concat(a," Packages"),className:"rounded object-cover shadow-lg",fill:!0})}),(0,n.jsx)("p",{className:"text-sm font-500 text-foreground-light",children:a})]}),(0,n.jsx)(p.Z,{size:22})]})})},v=function(e){let{searchInputStyle:a,packagesList:t,isDataLoading:s,topDesinations:i}=e,[r,p]=(0,c.useState)(""),[y,j]=(0,c.useState)(!1),v=(0,c.useRef)(null),N=["/data-voice-sms/","/data-voice-sms/regional/","/international-esim/"].includes((0,x.usePathname)());(0,c.useEffect)(()=>{function e(e){v.current&&!v.current.contains(e.target)&&j(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,c.useEffect)(()=>{if(s||!(0,m.E)(r))return;let e=setTimeout(()=>{(0,f.b)({event:"search",search_term:r})},1e3);return()=>clearTimeout(e)},[r,s]);let w=(0,c.useMemo)(()=>{if(s||!t||!i||!r)return null;let{local:e,regional:a,global:n,local_voice:l,regional_voice:o,global_voice:c}=t;return{dataOnly:{local:e.filter(e=>h({country:e,searchQuery:r})),regional:a.filter(e=>h({region:e,searchQuery:r})),global:{href:n.href,countries:n.countries.filter(e=>h({country:e,searchQuery:r,isGlobal:!0}))}},dataVoice:{local:l.filter(e=>h({country:e,searchQuery:r})),regional:o.filter(e=>h({region:e,searchQuery:r})),global:{href:c.href,countries:c.countries.filter(e=>h({country:e,searchQuery:r,isGlobal:!0}))}}}},[s,r,t]),D=(0,c.useMemo)(()=>{if(!w)return{isPackages:!1,isDataOnlyPackages:!1,isDataVoicePackages:!1,isDataOnlyLocal:!1,isDataOnlyRegional:!1,isDataOnlyGlobal:!1,isDataVoiceLocal:!1,isDataVoiceRegional:!1,isDataVoiceGlobal:!1};let{dataOnly:e,dataVoice:a}=w,{global:t,regional:n,local:s}=e,{global:l,regional:i,local:r}=a,o=s.length>0||n.length>0||t.countries.length>0,c=r.length>0||i.length>0||l.countries.length>0;return{isPackages:N?c:o||c,isDataOnlyPackages:o,isDataVoicePackages:c,isDataOnlyLocal:o&&s.length>0,isDataOnlyRegional:o&&n.length>0,isDataOnlyGlobal:o&&t.countries.length>0,isDataVoiceLocal:c&&r.length>0,isDataVoiceRegional:c&&i.length>0,isDataVoiceGlobal:c&&l.countries.length>0}},[w,N]);return(0,n.jsxs)("div",{ref:v,className:"relative z-50 grid w-full grid-rows-[auto_1fr] gap-2",children:[(0,n.jsxs)("div",{className:"relative w-full",children:[(0,n.jsx)(l.I,{placeholder:"Enter your destination",className:(0,g.cn)("!rounded-lg",a),onChange:function(e){let a=(0,m.E)(e.target.value);p(a),a&&j(!0)},value:r,onFocus:()=>j(!0),"aria-expanded":y,"aria-haspopup":"listbox",autoFocus:!0}),(0,n.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 transform text-primary"})]}),(0,n.jsx)("div",{className:"barMini max-h-[80dvh] min-h-[80dvh] overflow-y-auto rounded-md bg-background py-4 md:max-h-[350px] lg:min-h-[350px]",children:s?(0,n.jsx)("div",{className:"flex h-full w-full items-start justify-center pt-8",children:(0,n.jsx)(u.$,{})}):D.isPackages?(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[!N&&D.isDataOnlyPackages&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"mb-2 ps-2 font-montserrat text-[18px] font-semibold leading-none text-primary",children:"Data Only"}),D.isDataOnlyLocal&&(0,n.jsx)("div",{children:null==w?void 0:w.dataOnly.local.map((e,a)=>(0,n.jsx)(b,{countryName:e.name,image_url:e.image_url,index:a,href:e.href},"do-local-".concat(a,"-").concat(e.name)))}),D.isDataOnlyRegional&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"p-2 text-sm font-500 text-muted-foreground",children:"Regional"}),null==w?void 0:w.dataOnly.regional.map((e,a)=>(0,n.jsx)(b,{countryName:e.name,image_url:e.image_url,index:a,href:e.href},"do-reg-".concat(a,"-").concat(e.name)))]}),D.isDataOnlyGlobal&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"p-2 text-sm font-500 text-muted-foreground",children:"Global"}),(0,n.jsx)(b,{countryName:"Global",image_url:d,index:1,href:"/global/"})]})]}),D.isDataVoicePackages&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"mb-2 ps-2 font-montserrat text-[18px] font-semibold leading-none text-primary",children:"Data / Voice / SMS"}),D.isDataVoiceLocal&&(0,n.jsx)("div",{children:null==w?void 0:w.dataVoice.local.map((e,a)=>(0,n.jsx)(b,{countryName:e.name,image_url:e.image_url,index:a,href:e.href},"dv-local-".concat(a,"-").concat(e.name)))}),D.isDataVoiceRegional&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"p-2 text-sm font-500 text-muted-foreground",children:"Regional"}),null==w?void 0:w.dataVoice.regional.map((e,a)=>(0,n.jsx)(b,{countryName:e.name,image_url:e.image_url,index:a,href:e.href},"dv-reg-".concat(a,"-").concat(e.name)))]}),D.isDataVoiceGlobal&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"p-2 text-sm font-500 text-muted-foreground",children:"Global"}),(0,n.jsx)(b,{countryName:"Global",image_url:d,index:0,href:"/international-esim/"})]})]})]}):(0,n.jsxs)("div",{children:[r&&(0,n.jsx)("p",{className:"mb-2 ps-2 text-sm",children:"No match found â€” check out our top destinations!"}),(0,n.jsx)("p",{className:"mb-2 ps-2 font-montserrat text-[18px] font-semibold leading-none text-primary",children:"Top Destinations"}),null==i?void 0:i.map((e,a)=>(0,n.jsx)(b,{countryName:e.name,image_url:e.image_url,index:a,href:"/esim/".concat(e.slug,"/")},"top-".concat(a,"-").concat(e.slug)))]})})]})},N=t(18638),w=t(61475),D=t(75465),_=function(){let[e,a]=(0,c.useState)(!1),t=(0,w.Z)("(min-width: 768px)"),{data:d,isLoading:u}=(0,r.a)({queryKey:["search-packages-list"],queryFn:i.Ni,staleTime:1/0,enabled:e}),{data:m,isLoading:h}=(0,r.a)({queryKey:["top-destinations"],queryFn:i.WT,staleTime:1/0,enabled:e}),f=u||h;return(0,c.useEffect)(()=>{a(!0)},[]),t?(0,n.jsxs)(s.Vq,{children:[(0,n.jsx)(s.hg,{asChild:!0,children:(0,n.jsxs)("div",{className:"relative z-50 w-full",children:[(0,n.jsx)(l.I,{placeholder:"Search your destination",className:"w-full rounded-full shadow",readOnly:!0}),(0,n.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 transform text-primary"})]})}),(0,n.jsxs)(s.cZ,{children:[(0,n.jsx)(s.fK,{children:(0,n.jsx)(N.$N,{className:"font-montserrat text-lg font-semibold",children:"Search your destination"})}),(0,n.jsx)(v,{packagesList:d,topDesinations:m,isDataLoading:f})]})]}):(0,n.jsxs)(D.dy,{repositionInputs:!1,children:[(0,n.jsx)(D.Qz,{asChild:!0,children:(0,n.jsxs)("div",{className:"relative z-20 w-full",children:[(0,n.jsx)(l.I,{placeholder:"Search your destination",className:"w-full rounded-full shadow",readOnly:!0}),(0,n.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 transform text-primary"})]})}),(0,n.jsxs)(D.sc,{className:"p-3",children:[(0,n.jsx)(D.OX,{className:"p-0",children:(0,n.jsx)(D.iI,{className:"mb-2 text-start font-montserrat text-lg font-semibold",children:"Search your destination"})}),(0,n.jsx)(v,{packagesList:d,topDesinations:m,isDataLoading:f})]})]})}},39233:function(e,a,t){t.d(a,{E:function(){return n}});function n(e){return e.trimStart().toLowerCase()}},68718:function(e,a,t){t.d(a,{b:function(){return n}});function n(e){let a=window;Array.isArray(a.dataLayer)||(a.dataLayer=[]),a.dataLayer.push(e)}},92380:function(e,a,t){t.d(a,{Ni:function(){return i},WT:function(){return r},wG:function(){return l}});var n=t(16379),s=t(62974);async function l(){try{let e=await fetch("".concat(s.F,"/packages/country"),{headers:{"Content-Type":"application/json",...s.J},next:{revalidate:86400}}),a=await e.json();if(!e.ok||!a.status)throw Error((0,n.vr)(a,e.status));return a.data.map(e=>({...e,href:"/esim/".concat(e.slug)}))}catch(e){throw Error((0,n.LS)(e))}}async function i(){let e=await fetch("".concat(s.F,"/search-package-list"),{headers:{"Content-Type":"application/json",...s.J}}),a=await e.json();if(!e.ok||!a.status)throw Error((0,n.vr)(a,e.status));let{global:t,global_voice:l,local:i,local_voice:r,regional:o,regional_voice:c}=a.data,d=i.map(e=>({...e,href:"/esim/".concat(e.slug,"/")})),u=o.map(e=>({...e,href:"/regional/".concat(e.slug,"/")}));return{global:{href:"global",countries:t},local:d,regional:u,global_voice:{href:"/international-esim/",countries:l.flatMap(e=>e.countries)},local_voice:r.map(e=>({...e,href:"/".concat(e.slug,"-esim/")})),regional_voice:c.map(e=>({...e,href:"/".concat(e.slug,"-esim/")}))}}async function r(){try{let e=await fetch("".concat(s.F,"/top-destinations"),{headers:{"Content-Type":"application/json",...s.J}}),a=await e.json();if(!e.ok||!a.status)throw Error((0,n.vr)(a,e.status));return a.data}catch(e){throw Error((0,n.LS)(e))}}}}]);